services:
  bookstack:
    image: linuxserver/bookstack:25.11.20251109
    container_name: bookstack
    restart: unless-stopped

    volumes:
      # Config de BookStack
      - /DATA/AppData/$AppID/bookstack/config:/config

    environment:
      - APP_KEY=base64:3w/hRS2HYVFH5tJqD9AFlyurTh8mBByMKeMRyH9kEEQ=
      # IMPORTANTE: cambia esto cuando instales (o desde la UI de CasaOS)
      - APP_URL=http://mini-aoostart:8080
      - DB_HOST=bookstack-db
      - DB_USERNAME=bigbear
      - DB_PASSWORD=a3e8949f-484c-4877-afdb-391f892f9bb6
      - DB_DATABASE=bookstackapp

    ports:
      # Host 8080 â†’ contenedor 80
      - "8080:80"

    depends_on:
      - bookstack-db

    networks:
      - bookstack-network

    x-casaos:
      envs:
        - container: APP_URL
          description:
            en_us: "Public URL for BookStack (set to your server URL)."
        - container: DB_HOST
          description:
            en_us: "Database host name"
        - container: DB_USERNAME
          description:
            en_us: "Database user"
        - container: DB_PASSWORD
          description:
            en_us: "Database password"
        - container: DB_DATABASE
          description:
            en_us: "Database name"

      ports:
        - container: "80"
          description:
            en_us: "BookStack web interface (HTTP)"

      volumes:
        - container: /config
          description:
            en_us: "BookStack config & app data"

  bookstack-db:
    image: linuxserver/mariadb:10.11.6
    container_name: bookstack-db
    restart: unless-stopped

    environment:
      - MYSQL_ROOT_PASSWORD=793e92b7-58d2-47b9-aae5-b8c7d58bd699
      - MYSQL_DATABASE=bookstackapp
      - MYSQL_USER=bigbear
      - MYSQL_PASSWORD=a3e8949f-484c-4877-afdb-391f892f9bb6

    volumes:
      - /DATA/AppData/$AppID/bookstack/mysql:/config

    networks:
      - bookstack-network

    x-casaos:
      volumes:
        - container: /config
          description:
            en_us: "MariaDB data & config"

networks:
  bookstack-network:
    driver: bridge

x-casaos:
  architectures:
    - amd64
    - arm64
  main: bookstack
  author: Payrillium
  category: Payrillium
  developer: "Dan Brown"
  title:
    en_us: "BookStack"
  description:
    en_us: "Simple, self-hosted platform for organizing and storing documentation and knowledge."
  tagline:
    en_us: "Organize your team knowledge with BookStack on PayrilliumOS."
  icon: "https://raw.githubusercontent.com/Payrillium/payrillium-store/main/Apps/Bookstack/bookstack.png"
  thumbnail: "https://raw.githubusercontent.com/Payrillium/payrillium-store/main/Apps/Bookstack/bookstack.png"
  index: /
  scheme: http
  port_map: "8080"
